\documentclass[journal,12pt,twocolumn]{IEEEtran}
\usepackage{setspace}
\usepackage{gensymb}
\singlespacing
\usepackage[cmex10]{amsmath}
\usepackage{amsthm}
\usepackage{mathrsfs}
\usepackage{txfonts}
\usepackage{stfloats}
\usepackage{bm}
\usepackage{cite}
\usepackage{cases}
\usepackage{subfig}
\usepackage{longtable}
\usepackage{multirow}
\usepackage{enumitem}
\usepackage{mathtools}
\usepackage{tikz}
\usepackage{circuitikz}
\usepackage{verbatim}
\usepackage[breaklinks=true]{hyperref}
\usepackage{tkz-euclide} % loads  TikZ and tkz-base
\usepackage{listings}
\usepackage{color}    
\usepackage{array}    
\usepackage{longtable}
\usepackage{calc}     
\usepackage{multirow} 
\usepackage{hhline}   
\usepackage{ifthen}   
\usepackage{lscape}
\usepackage{chngcntr}
\DeclareMathOperator*{\Res}{Res}
\renewcommand\thesection{\arabic{section}}
\renewcommand\thesubsection{\thesection.\arabic{subsection}}
\renewcommand\thesubsubsection{\thesubsection.\arabic{subsubsection}}

\renewcommand\thesectiondis{\arabic{section}}
\renewcommand\thesubsectiondis{\thesectiondis.\arabic{subsection}}
\renewcommand\thesubsubsectiondis{\thesubsectiondis.\arabic{subsubsection}}
\renewcommand\thetable{\arabic{table}}
% correct bad hyphenation here
\hyphenation{op-tical net-works semi-conduc-tor}
\def\inputGnumericTable{}                                 %%

\lstset{
language=bash,
frame=single, 
breaklines=true,
columns=fullflexible,
basicstyle=\ttfamily,
}
%\lstset{
%language=tex,
%frame=single, 
%breaklines=true
%}

\DeclareMathOperator*{\argmax}{arg\,max}
\DeclareMathOperator*{\argmin}{arg\,min}
\begin{document}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{problem}{Problem}
\newtheorem{proposition}{Proposition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{example}{Example}[section]
\newtheorem{definition}[problem]{Definition}
\newcommand{\BEQA}{\begin{eqnarray}}
\newcommand{\EEQA}{\end{eqnarray}}
\newcommand{\define}{\stackrel{\triangle}{=}}
\bibliographystyle{IEEEtran}
\providecommand{\mbf}{\mathbf}
\providecommand{\pr}[1]{\ensuremath{\Pr\left(#1\right)}}
\providecommand{\qfunc}[1]{\ensuremath{Q\left(#1\right)}}
\providecommand{\sbrak}[1]{\ensuremath{{}\left[#1\right]}}
\providecommand{\lsbrak}[1]{\ensuremath{{}\left[#1\right.}}
\providecommand{\rsbrak}[1]{\ensuremath{{}\left.#1\right]}}
\providecommand{\brak}[1]{\ensuremath{\left(#1\right)}}
\providecommand{\lbrak}[1]{\ensuremath{\left(#1\right.}}
\providecommand{\rbrak}[1]{\ensuremath{\left.#1\right)}}
\providecommand{\cbrak}[1]{\ensuremath{\left\{#1\right\}}}
\providecommand{\lcbrak}[1]{\ensuremath{\left\{#1\right.}}
\providecommand{\rcbrak}[1]{\ensuremath{\left.#1\right\}}}
\theoremstyle{remark}
\newtheorem{rem}{Remark}
\newcommand{\sgn}{\mathop{\mathrm{sgn}}}
\providecommand{\abs}[1]{\left\vert#1\right\vert}
\providecommand{\res}[1]{\Res\displaylimits_{#1}} 
\providecommand{\norm}[1]{\left\lVert#1\right\rVert}
\providecommand{\mtx}[1]{\mathbf{#1}}
\providecommand{\mean}[1]{E\left[ #1 \right]}   
\providecommand{\fourier}{\overset{\mathcal{F}}{ \rightleftharpoons}}
\providecommand{\system}[1]{\overset{\mathcal{#1}}{ \longleftrightarrow}}
\newcommand{\solution}{\noindent \textbf{Solution: }}
\newcommand{\cosec}{\,\text{cosec}\,}
\providecommand{\dec}[2]{\ensuremath{\overset{#1}{\underset{#2}{\gtrless}}}}
\newcommand{\myvec}[1]{\ensuremath{\begin{pmatrix}#1\end{pmatrix}}}
\newcommand{\mydet}[1]{\ensuremath{\begin{vmatrix}#1\end{vmatrix}}}
\renewcommand{\vec}[1]{\boldsymbol{\mathbf{#1}}}
\def\putbox#1#2#3{\makebox[0in][l]{\makebox[#1][l]{}\raisebox{\baselineskip}[0in][0in]{\raisebox{#2}[0in][0in]{#3}}}}
     \def\rightbox#1{\makebox[0in][r]{#1}}
     \def\centbox#1{\makebox[0in]{#1}}
     \def\topbox#1{\raisebox{-\baselineskip}[0in][0in]{#1}}
     \def\midbox#1{\raisebox{-0.5\baselineskip}[0in][0in]{#1}}

\vspace{3cm}
\title{Visualizaing the Internet Topology}
\author{Anshul Sangrame (CS21BTECH11004)\\Gautam Singh (CS21BTECH11018)\\Varun Gupta (CS21BTECH11060)}
\maketitle
\tableofcontents
\bigskip

This document contains a report on the Python library \texttt{netvis} created by
the authors, to visualize the topology of the internet. It covers some
implementation details, challenges in implementation and conclusions from using
this library.

\section{Implementation}

\texttt{netvis} is a \texttt{python} package, installable using \texttt{pip}. In
the following subsections, we describe the installation and sailent features
provided by this library.

The entire source code is hosted on
\href{https://github.com/goats-9/cs3530-assignments/tree/main/netvis}{GitHub}.
The verbose implementation details are provided as comments in the source code,
which have been omitted here for brevity.

\subsection{Installation}

\texttt{netvis} can be installed by typing the following in a terminal window.

\begin{lstlisting}
$ git clone https://github.com/goats-9/cs3530-assignments
$ cd cs3530-assignments/netvis
$ pip install -e .
\end{lstlisting}

It is \emph{highly recommended} to install the package in a Python virtual
environment.

\subsection{Requirements}

To help in the visualization of the topology of the Internet, \texttt{netvis}
depends on the following Python packages.
\begin{enumerate}
     \item \href{https://pandas.pydata.org/}{\texttt{pandas}}. To process the
     raw data obtained for visualization.
     \item \href{https://openpyxl.readthedocs.io/en/stable/}{\texttt{openpyxl}}.
     To handle raw data in Excel files.
     \item \href{https://pyvis.readthedocs.io/en/latest/}{\texttt{pyvis}}. To
     visualize the network in the form of a graph.
     \item \href{https://flask.palletsprojects.com/en/2.3.x/}{flask}. To
     integreate the network created and add other features such as a legend for
     easy viewing and usage.
\end{enumerate}

Additionally, note that this library is suitable for Linux systems only, and
also requires the executable
\href{https://linux.die.net/man/8/mtr}{\texttt{mtr}} to be installed on the
system.

\subsection{Features}

The sailent features of \texttt{netvis} are the following.
\begin{enumerate}
     \item A \texttt{NetGraph} object to abstract the topology of the Internet
     into a directed graph, containing a list of nodes and edges.
     \item Use of \texttt{mtr} (short for \emph{my traceroute}) with appropriate
     arguments to obtain the entire sequence of hops from source to destination,
     along with AS numbers of ISPs (if available) in CSV form for easy data
     handling.
     \item Provisions to save and load \texttt{NetGraph} objects to and from
     Excel files so that they can be used in other Python scripts.
     \item Provision to create a union of two \texttt{NetGraph} objects so that
     the topology from multiple sources to multiple destinations is
     \emph{integrated}.
     \item Rendering of the graph depicting the topology in HTML, along with the
     use of \texttt{flask} to add a legend and host the entire page on a server.
     The graph is present in \texttt{graph.html}, but the integrated legend is
     displayed on running the \texttt{flask} webserver and going to the
     specified URL in a browser.
\end{enumerate}

\subsection{Simulation}

\begin{enumerate}
     \item The data from each source was collected by running the script
     \begin{lstlisting}
$ python3 tests/data_collector.py
     \end{lstlisting}
     \item The data from various sources was combined and the graph created by
     running the script
     \begin{lstlisting}
$ python3 tests/visualize.py
     \end{lstlisting}
     \item The graph was displayed on running the server as follows.
     \begin{lstlisting}
$ cd server
$ flask run
     \end{lstlisting}
\end{enumerate}

\section{Challenges}

The authors wanted to automate the entire process of visualizing the internet
topology. The following challenges were faced in the process.

\begin{enumerate}
     \item Whenever \texttt{netvis} is imported, a dataset about 30 MB in size
     is downloaded and loaded into a \texttt{DataFrame} object. This may not be
     suitable for systems with constraints on resources like memory or internet
     speed (such as embedded systems).

     A more suitable solution could have been hosting the data on a webserver
     and making HTTP GET requests to a URL.
     \item \texttt{pyvis} does not have a provision to provide a legend for easy
     use of the generated graph. The authors worked around this using
     \texttt{flask} and adding the legend through a \texttt{.csv} file.
     \item The outputs of \texttt{mtr} did not include the source IP address. It
     was manually added by making use of the Python standard library module
     \href{https://docs.python.org/3/library/socket.html}{\texttt{socket}}.
\end{enumerate}

\section{Observations}
The following conclusions can be made based on the data collected.

\begin{enumerate}
     \item The graph obtained is a directed acyclic graph, and there are no
     cycles in the network observed. Oherwise, a packet would travel in a cycle
     without reaching its intended destination and in turn get dropped. Presence
     of such a cycle may mean that the routing and forwarding algorithms in that
     part of the network are bugged.
     \item From the raw data, sites hosted in countries east of India have
     lesser RTTs (less than 200 ms) compared to sites hosted in countries to the
     west of India (at least 200 ms), when performing traceroutes from sources
     in India.
     \item The opposite is observed when performing traceroutes from sources in
     Europe (source IP \texttt{172.31.49.238}). That is, sites hosted in Oceania
     had higher average RTT compared to sites hosted in America.
     \item 
     \begin{enumerate}
          \item Using the LAN service available in IITH (source IP
          \texttt{10.5.80.104}), the packets always travelled through the ISP at
          IITH and sometimes through the NKN Core Network.
          \item Using mobile data, the packets always went through the service
          providers to which the SIM cards were registered.
          \item Using a personal WiFi network (not in campus, source IP
          \texttt{192.168.1.38}), the packets went through
          \href{https://www.ctrls.in/}{CtrlS datacenters}, which might mean that
          the \href{https://reachtele.net/}{local ISP} uses the services of this
          datacenter to host and provide Internet services to their customers.
     \end{enumerate}
     \item Some of the largest ISPs observed in terms of number of hops are 
     \begin{enumerate}
          \item \texttt{AS8075}. This corresponds to the datacenter of
          \href{https://www.microsoft.com/en-in}{Microsoft Corporation}.
          \item \texttt{AS1299}. This corresponds to
          \href{https://www.arelion.com/}{Arelion}, which is a Swedish
          telecommuniations services provider.
          \item \texttt{AS174}. This corresponds to
          \href{https://www.cogentco.com/en/}{Cogent Communications}, which is a
          multinational internet service provider based in the USA.
     \end{enumerate}
\end{enumerate}

\section{Resources}

\begin{enumerate}
     \item The raw and processed data is present in the \texttt{data} directory.
     \item The scripts used to collect and visualize the data are present in the
     \texttt{tests} directory.
     \item The \texttt{flask} server script is present in the \texttt{server}
     directory.
     \item The ASN dataset \texttt{data/asn.tsv} was taken and edited from
     \href{https://asntool.com/}{\texttt{asntool.com}}.
     \item The \href{https://hatch.pypa.io/latest/}{hatch} build system was used
     to package the code.
\end{enumerate}

\end{document}
